<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Puzzle Game</title>
  <link rel="stylesheet" href="./style.css" />

  <!-- Konva (—Ä–µ–Ω–¥–µ—Ä) -->
  <script src="https://unpkg.com/konva@9/konva.min.js"></script>
  <!-- Headbreaker (jigsaw + snap + –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è) -->
  <script src="https://flbulgarelli.github.io/headbreaker/js/headbreaker.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">üß©</span>
      <span class="brand-name">Puzzle Game</span>
    </div>

    <nav class="nav">
      <button class="nav-btn" data-route="create">Create</button>
      <button class="nav-btn" data-route="play">Play</button>
      <button class="nav-btn" data-route="mypuzzles">My Puzzles</button>
    </nav>
  </header>

  <main class="shell">
    <!-- CREATE -->
    <section id="page-create" class="page">
      <div class="card big">
        <div class="card-head">
          <h1>Create Puzzle</h1>
          <p class="muted">
            –ó–∞–≤–∞–Ω—Ç–∞–∂ —Ñ–æ—Ç–æ, –∑–∞–¥–∞–π –Ω–∞–∑–≤—É, –≤–∏–¥–∏–º—ñ—Å—Ç—å —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞—Å—Ç–∏–Ω–æ–∫ ‚Äî —ñ –æ–¥—Ä–∞–∑—É –ø–æ—á–∏–Ω–∞–π –≥—Ä—É.
          </p>
        </div>

        <div class="grid-2">
          <div class="block">
            <label class="label">Image</label>

            <div id="dropzone" class="dropzone" tabindex="0">
              <div class="dz-title">–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ —Ñ–æ—Ç–æ —Å—é–¥–∏ –∞–±–æ –∫–ª—ñ–∫–Ω–∏, —â–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</div>
              <div class="dz-sub muted">PNG/JPG/WebP. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–æ ~3‚Äì5MB.</div>
              <input id="fileInput" class="dz-input" type="file" accept="image/*" />
            </div>

            <div class="row gap">
              <button id="useDemo" class="btn ghost">Use demo image</button>
              <button id="removeImage" class="btn ghost danger">Remove</button>
            </div>

            <div class="preview-wrap">
              <div class="label muted">Preview</div>
              <img id="imgPreview" class="preview" alt="preview" />
            </div>

            <div class="help muted">
              ‚ö†Ô∏è Private/Link-only –Ω–∞ GitHub Pages –ø—Ä–∞—Ü—é—î —è–∫ ‚Äú–ª–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ‚Äù.
              –ù–∞ —ñ–Ω—à–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó —Ü—å–æ–≥–æ –ø–∞–∑–ª–∞ –Ω–µ –±—É–¥–µ, —è–∫—â–æ —Ç–∏ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å–µ—à –¥–∞–Ω—ñ (—Ü–µ –≤–µ—Ä—Å—ñ—è –±–µ–∑ –±–µ–∫–µ–Ω–¥—É).
            </div>
          </div>

          <div class="block">
            <label class="label">Puzzle name</label>
            <input id="puzzleName" class="input" type="text" placeholder="–ù–∞–ø—Ä. My Magic Puzzle" />

            <div class="spacer"></div>

            <label class="label">Visibility</label>
            <select id="visibility" class="select">
              <option value="public">Public</option>
              <option value="link">Anyone with the link</option>
              <option value="private">Private</option>
            </select>

            <div class="spacer"></div>

            <label class="label">Pieces</label>
            <select id="piecesCount" class="select">
              <option>10</option><option>20</option><option>32</option><option>48</option>
              <option selected>64</option><option>72</option><option>90</option><option>100</option>
              <option>120</option><option>140</option><option>164</option><option>180</option><option>200</option>
            </select>

            <div class="help muted">
              –ö—ñ–ª—å–∫—ñ—Å—Ç—å = —Ç–æ—á–Ω–µ —á–∏—Å–ª–æ —á–∞—Å—Ç–∏–Ω–æ–∫. –†–æ–∑–∫–ª–∞–¥–∫–∞ (—Ä—è–¥–∏/–∫–æ–ª–æ–Ω–∫–∏) –ø—ñ–¥–±–∏—Ä–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —Ñ–æ—Ç–æ.
            </div>

            <div class="spacer"></div>

            <div class="row right gap">
              <button id="cancelCreate" class="btn ghost">Cancel</button>
              <button id="createAndPlay" class="btn primary">Create &amp; Play</button>
            </div>

            <div class="spacer"></div>

            <label class="label">Share link</label>
            <div class="row gap">
              <input id="shareLink" class="input" type="text" readonly />
              <button id="copyLink" class="btn ghost">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PLAY -->
    <section id="page-play" class="page">
      <div class="play-head">
        <div>
          <h1 id="playTitle">Play</h1>
          <div class="timer">
            <span class="timer-ic">‚è±</span>
            <span id="timerText">00:00</span>
          </div>
        </div>

        <div class="row gap">
          <button id="btnImage" class="btn ghost">Image</button>
          <button id="btnShuffle" class="btn ghost">Shuffle</button>
          <button id="btnBack" class="btn ghost">Back</button>
        </div>
      </div>

      <div class="play-grid">
        <div class="stage-card">
          <div class="stage-title muted">Puzzle board</div>
          <div id="puzzleHost" class="puzzle-host"></div>
        </div>

        <div class="side-card">
          <div class="stage-title muted">Leaderboard</div>
          <div class="muted small">–ó–∞–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —ñ–º–µ–Ω—ñ (localStorage).</div>
          <div id="leaderboard" class="leaderboard"></div>
        </div>
      </div>
    </section>

    <!-- MY PUZZLES -->
    <section id="page-mypuzzles" class="page">
      <div class="card">
        <div class="card-head">
          <h1>My Puzzles</h1>
          <p class="muted">–°–ø–∏—Å–æ–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –ø–∞–∑–ª—ñ–≤ —É —Ç–≤–æ—î–º—É –±—Ä–∞—É–∑–µ—Ä—ñ.</p>
        </div>
        <div id="myPuzzlesList" class="list"></div>
      </div>
    </section>
  </main>

  <!-- IMAGE MODAL -->
  <div id="imgModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Reference image</div>
        <button class="modal-close" data-close="1">‚úï</button>
      </div>
      <div class="modal-body">
        <img id="modalImg" alt="reference" />
      </div>
    </div>
  </div>

  <!-- WIN MODAL -->
  <div id="winModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">‚úÖ Puzzle completed!</div>
        <button class="modal-close" id="winClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="win-row">
          <div class="muted">Your time</div>
          <div id="winTime" class="win-time">00:00</div>
        </div>
        <div class="spacer"></div>
        <label class="label">Your name</label>
        <input id="playerName" class="input" type="text" placeholder="–ù–∞–ø—Ä. garbar27" />
        <div class="spacer"></div>
        <div class="row right gap">
          <button id="playAgain" class="btn ghost">Play again</button>
          <button id="saveScore" class="btn primary">Save to leaderboard</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer muted">
    Made for GitHub Pages ‚Ä¢ –ø—Ä–∞—Ü—é—î –±–µ–∑ –±–µ–∫–µ–Ω–¥—É (localStorage)
  </footer>

  <script src="./script.js"></script>
</body>
</html>
