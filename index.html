<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Puzzle Game</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Headbreaker (jigsaw puzzle engine) -->
  <script src="https://flbulgarelli.github.io/headbreaker/js/headbreaker.js"></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">üß©</span>
      <span class="title">Puzzle Game</span>
    </div>

    <nav class="nav">
      <button class="navBtn" data-view="create">Create</button>
      <button class="navBtn" data-view="play">Play</button>
      <button class="navBtn" data-view="mypuzzles">My Puzzles</button>
    </nav>
  </header>

  <main class="page">
    <!-- CREATE -->
    <section id="view-create" class="view">
      <div class="card">
        <h1>Create Puzzle</h1>
        <p class="muted">–ó–∞–≤–∞–Ω—Ç–∞–∂ —Ñ–æ—Ç–æ, –∑–∞–¥–∞–π –Ω–∞–∑–≤—É, –≤–∏–¥–∏–º—ñ—Å—Ç—å —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞—Å—Ç–∏–Ω ‚Äî —Ç–∞ –ø–æ—á–∏–Ω–∞–π –≥—Ä—É.</p>

        <div class="formGrid">
          <div class="field">
            <label>Image</label>
            <div class="upload">
              <input id="fileInput" type="file" accept="image/png,image/jpeg,image/webp" />
              <div class="uploadHelp">
                PNG/JPG/WebP ‚Ä¢ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–æ ~3‚Äì5MB
              </div>
              <div class="uploadActions">
                <button id="useDemoBtn" class="btn secondary" type="button">Use demo image</button>
                <button id="removeImgBtn" class="btn ghost" type="button">Remove</button>
              </div>
            </div>

            <div class="previewWrap">
              <div class="previewTitle">Preview</div>
              <img id="imgPreview" class="previewImg" alt="preview" />
            </div>
          </div>

          <div class="field">
            <label>Puzzle name</label>
            <input id="puzzleName" class="input" type="text" placeholder="–ù–∞–ø—Ä. My Magic Puzzle" maxlength="60" />
          </div>

          <div class="field">
            <label>Visibility</label>
            <select id="visibility" class="select">
              <option value="public">Public</option>
              <option value="link">Anyone with the link</option>
              <option value="private">Private</option>
            </select>
            <div class="hint">
              * –ù–∞ GitHub Pages —Ü–µ –ø—Ä–∞—Ü—é—î —è–∫ ‚Äú–ª–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ‚Äù.
              ‚ÄúLink-only‚Äù —Ö–æ–≤–∞—î –ø–∞–∑–ª –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —É –ø–æ—Å–∏–ª–∞–Ω–Ω—ñ.
            </div>
          </div>

          <div class="field">
            <label>Pieces</label>
            <select id="piecesCount" class="select">
              <option>10</option><option>20</option><option>32</option><option selected>48</option>
              <option>64</option><option>72</option><option>90</option><option>100</option>
              <option>120</option><option>140</option><option>164</option><option>180</option><option>200</option>
            </select>
            <div class="hint">
              –ö—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞—Å—Ç–∏–Ω = —Ç–æ—á–Ω–µ —á–∏—Å–ª–æ –ø–∞–∑–ª–∏–Ω–æ–∫. –†–æ–∑–∫–ª–∞–¥ (—Ä—è–¥–∏/–∫–æ–ª–æ–Ω–∫–∏) –ø—ñ–¥–±–∏—Ä–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
            </div>
          </div>
        </div>

        <div class="actionsRow">
          <button id="cancelCreateBtn" class="btn ghost" type="button">Cancel</button>
          <button id="createPlayBtn" class="btn primary" type="button">Create &amp; Play</button>
        </div>

        <div class="shareBox" id="shareBox">
          <div class="shareTitle">Share link</div>
          <div class="shareRow">
            <input id="shareLink" class="input" type="text" readonly />
            <button id="copyLinkBtn" class="btn secondary" type="button">Copy</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PLAY -->
    <section id="view-play" class="view hidden">
      <div class="playTop">
        <div class="playInfo">
          <div class="playTitle" id="playTitle">Play</div>
          <div class="timer">
            <span class="timerIcon">‚è±</span>
            <span id="timerText">00:00</span>
          </div>
        </div>

        <div class="playButtons">
          <button id="toggleImageBtn" class="btn secondary" type="button">Image</button>
          <button id="shuffleBtn" class="btn ghost" type="button">Shuffle</button>
          <button id="backToCreateBtn" class="btn ghost" type="button">Back</button>
        </div>
      </div>

      <div class="stageWrap">
        <!-- faint target frame -->
        <div class="targetFrame" id="targetFrame"></div>

        <!-- headbreaker renders here -->
        <div id="puzzleStage" class="puzzleStage"></div>

        <!-- image overlay -->
        <div id="imageOverlay" class="overlay hidden">
          <div class="overlayCard">
            <div class="overlayHead">
              <div class="overlayTitle">Final image</div>
              <button id="closeOverlayBtn" class="btn ghost" type="button">Close</button>
            </div>
            <img id="finalImage" class="finalImage" alt="final" />
          </div>
        </div>

        <!-- solved modal -->
        <div id="solvedOverlay" class="overlay hidden">
          <div class="overlayCard">
            <div class="overlayHead">
              <div class="overlayTitle">Puzzle completed! üéâ</div>
              <button id="closeSolvedBtn" class="btn ghost" type="button">Close</button>
            </div>

            <div class="solvedBody">
              <div class="solvedRow">
                <div class="muted">Your time</div>
                <div class="big" id="solvedTime">00:00</div>
              </div>

              <div class="field" style="margin-top:12px;">
                <label>Your name</label>
                <input id="playerName" class="input" type="text" placeholder="–ù–∞–ø—Ä. Garbar" maxlength="32" />
              </div>

              <div class="actionsRow" style="margin-top:12px;">
                <button id="saveScoreBtn" class="btn primary" type="button">Save to leaderboard</button>
                <button id="playAgainBtn" class="btn secondary" type="button">Play again</button>
              </div>

              <div class="hint" style="margin-top:10px;">
                –ó–∞–ø–∏—Å—É—î—Ç—å—Å—è –ª–∏—à–µ –Ω–∞–π–∫—Ä–∞—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ç–≤–æ–≥–æ —ñ–º–µ–Ω—ñ (—è–∫—â–æ –ø–æ–∫—Ä–∞—â–∏—à ‚Äî –æ–Ω–æ–≤–∏—Ç—å—Å—è).
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="below">
        <div class="card">
          <h2>Leaderboard</h2>
          <div class="muted" id="lbHint">–¢–æ–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ —É —Ç–≤–æ—î–º—É –±—Ä–∞—É–∑–µ—Ä—ñ).</div>
          <div id="leaderboard" class="leaderboard"></div>
        </div>
      </div>
    </section>

    <!-- MY PUZZLES -->
    <section id="view-mypuzzles" class="view hidden">
      <div class="card">
        <h1>My Puzzles</h1>
        <p class="muted">–°–ø–∏—Å–æ–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –ø–∞–∑–ª—ñ–≤ —É —Ü—å–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ.</p>
        <div id="puzzlesList" class="puzzlesList"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span class="muted">Made for GitHub Pages ‚Ä¢ –ø—Ä–∞—Ü—é—î –±–µ–∑ –±–µ–∫–µ–Ω–¥—É (localStorage)</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
